(function(){window.Instajam=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d;return o=null,c=function(e){e=e||(e={});if(!e.client_id||!e.redirect_uri)throw new t("Client ID and redirect URI are required.");if(e.scope&&typeof e.scope=="object")this.scope="&scope="+e.scope.join("+");else if(e.scope&&typeof e.scope!="object")throw new t("Scope should be an array of requested scopes");return o="https://instagram.com/oauth/authorize/?client_id="+e.client_id+"&redirect_uri="+e.redirect_uri+"&response_type=token"+(this.scope||""),u.call(this),this},s=function(){},s.prototype.self=function(e){return h({url:"users/self",success:e})},s.prototype.feed=function(e,t){return typeof e=="function"&&(t=e,e=null),h({url:"users/self/feed",data:e,success:t})},s.prototype.liked=function(e,t){return typeof e=="function"&&(t=e,e=null),h({url:"users/self/media/liked",data:e,success:t})},s.prototype.get=function(e,n){if(!e)throw new t("A user's ID is required for user.get()");return h({url:"users/"+e,success:n})},s.prototype.getRecent=function(e,n,r){if(!e)throw new t("A user's ID is required for user.getRecent()");return typeof n=="function"&&(r=n,n=null),h({url:"users/"+e+"/media/recent",data:n,success:r})},s.prototype.search=function(e,n,r){if(!e)throw new t("A search term is required for user.search()");return typeof n=="function"&&(r=n,n={}),n.q=e,h({url:"users/search",data:n,success:r})},s.prototype.lookup=function(e,n){if(!e)throw new t("A username is required for user.lookup()");return s.prototype.search.call(this,e,{},function(e){e.data&&e.data.length===1&&(e=e.data[0]);if(typeof n=="function")return n(e)})},s.prototype.follows=function(e,t){return h({url:"users/"+e+"/follows",success:t})},s.prototype.following=function(e,t){return h({url:"users/"+e+"/followed-by",success:t})},s.prototype.requests=function(e){return h({url:"users/self/requested-by",success:e})},s.prototype.getRelationship=function(e,t){return h({url:"users/"+e+"/relationship",success:t})},r=function(){},r.prototype.get=function(e,t){return h({url:"media/"+e,success:t})},r.prototype.search=function(e,n){if(!e.lat&&!e.lng)throw new t("'lat' and 'lng' parameters are required.");return h({url:"media/search",data:e,success:n})},r.prototype.popular=function(e){return h({url:"media/popular",success:e})},r.prototype.comments=function(e,t){return h({url:"media/"+e+"/comments",success:t})},r.prototype.likes=function(e,t){return h({url:"media/"+e+"/likes",success:t})},i=function(){},i.prototype.meta=function(e,t){return h({url:"tags/"+e,success:t})},i.prototype.get=function(e,t,n){return h({url:"tags/"+e+"/media/recent",data:t,success:n})},i.prototype.search=function(e,t){return h({url:"tags/search",data:{q:e},success:t})},n=function(){},n.prototype.meta=function(e,t){return h({url:"locations/"+e,success:t})},n.prototype.get=function(e,t,n){return h({url:"locations/"+e+"/media/recent",data:t,success:n})},n.prototype.search=function(e,t){return h({url:"locations/search",data:e,success:t})},e=function(){},e.prototype.get=function(e,t,n){return h({url:"geographies/"+e+"/media/recent",data:t,success:n})},u=function(){return localStorage.getItem("access_token")?this.authenticated=!0:l("access_token")?(localStorage.setItem("access_token",l("access_token",!0)),this.authenticated=!0):this.authenticated=!1},a=function(){return localStorage.removeItem("access_token"),this.authenticated=!1},f=function(){return o},l=function(e,t){var n,r,i;return r=new RegExp("(?:&|#)"+e+"=([a-z0-9._-]+)","i"),n=window.location.hash.match(r),n?(t&&(i=new RegExp("(?:&|#)"+e+"="+n[1],"i"),window.location.hash=window.location.hash.replace(i,"")),n[1]):!1},d=function(){var e;e="instajam";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}},h=function(e){var n,r,i,s;s="https://api.instagram.com/v1/",n="instajam"+Math.round((new Date).getTime()/1e3),e.data||(e.data={}),e.data.access_token=localStorage.getItem("access_token"),e.data.callback=n,r=p(e.data),e.url?e.url=""+s+e.url+"?"+r:e.url=null;if(e.url)return window[n]=function(t){return typeof e.success=="function"&&e.success(t),i.parentNode.removeChild(i),delete window[n]},i=document.createElement("script"),i.type="text/javascript",i.src=e.url,document.getElementsByTagName("body")[0].appendChild(i);throw new t("Instajam:: Missing request URL")},p=function(e){var t,n;n=[];for(t in e)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")},t=function(e){return this.name="InstajamError",this.message=e||(e="")},t.prototype=Error.prototype,{init:c,logout:a,getAuthUrl:f,user:new s,media:new r,tag:new i,location:new n,geography:new e}}(),typeof define=="function"&&define.amd&&define("Instajam",[],function(){return window.Instajam})}).call(this);